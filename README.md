# javascript-convenience-store-precourse

# 1. 프로그램 소개 - 편의점

이 편의점 관리 프로그램은 사용자가 상품을 선택하고 결제할 수 있는 간단한 편의점 시뮬레이션입니다. 이 프로그램은 편의점의 상품 목록과 재고를 관리하며, 다양한 할인 및 프로모션 정책을 적용해 최종 결제 금액을 산출합니다. 또한 멤버십 할인과 추가 구매 옵션을 제공하여, 사용자에게 현실적인 구매 경험을 제공합니다.

# 2. 기능 목록

### MainController (controllers/)

- ✅ 현재 재고 출력
- ✅ 구매할 상품 장바구니 추가
- ✅ 프로모션 확인 및 처리
- ✅ 재고 차감
- ✅ 멤버십 할인 적용 여부 확인 후 영수증 출력
- ✅ 추가 구매 여부 확인

### InputView (views/)

- ✅ 구매할 상품명과 수량 입력 받기
- ✅ 추가 구매 입력 선택 (Y/N) 받기
- ✅ 멤버십 할인 적용 여부 (Y/N) 받기
- ✅ 프로모션 무료 상품 추가 여부 (Y/N) 받기
- ✅ 프로모션 포기 여부 (Y/N) 받기

### OutputView (views/)

- ✅ 현재 상품 목록과 프로모션 정보 출력
- ✅ 구매 내역, 할인 내역, 최종 결제 금액이 포함된 영수증 정렬 출력
- ✅ 오류 발생 시 적절한 메시지 출력

### ProductManager (models/)

- ✅ 초기 상품 목록 필드에 세팅
- ✅ 구매하려는 상품의 재고가 충분한지 확인
- ✅ 구매 후 재고 차감
- ✅ 현재 상품 목록 출력용 메세지 생성

### Cart (models/)

- ✅ 장바구니에 상품과 수량 추가하고 할인금액 누적
- ✅ 상품별 가격과 수량을 바탕으로 프로모션 적용 총 구매액 계산
- ✅ 멤버십 할인을 적용해 최종 금액 계산
- ✅ 프로모션 재고가 부족하여 일부 수량을 프로모션 혜택 없이 결제해야 하는 경우, 일부 수량에 대해 정가로 결제할지 여부에 대한 안내 메시지를 출력
- ✅ 프로모션 적용이 가능한 상품에 대해 고객이 해당 수량만큼 가져오지 않았을 경우, 입력 (Y/N)에 따라 추가증정

### PromotionManager (models/)

- ✅ N+1 프로모션(예: 1+1, 2+1) 혜택 적용
- ✅ 프로모션에 따른 할인 금액 계산

### MembershipManager (models/)

- ✅ 멤버십 회원 할인 적용 (최대 8,000원까지)

### loadProductData() (utils/)

- ✅ 초기 상품 목록 객체 데이터로 가져오기

### loadPromotionData() (utils/)

- ✅ 초기 프로모션 목록 객체 데이터로 가져오기

# 3. 회고

#### 지원서나 중간 회고에서 현실적인 목표를 설정하고 이를 달성했다고 생각하나요? 그 이유는 무엇인가요?

#### 중간 회고에서 조정한 목표가 실제 목표 달성에 도움이 되었나요? 목표를 달성하는 데 어떤 점이 효과적이었다고 생각하나요?

#### 각 미션의 목표를 달성하기 위해 세운 계획을 잘 이행했나요? 그 과정에서 어떤 전략이 효과가 있었나요?

#### 몰입하고 함께 성장하는 과정을 통해 인상 깊었던 경험이나 변화가 있었나요?

# 4. 요구사항 체크리스트

### 프로그래밍 요구사항

#### ✅ Node.js 20.17.0 버전에서 실행 가능

#### ✅ 프로그램 실행의 시작점

- App.js의 run()

#### ✅ package.json 파일 변경 금지

- eslint 포맷팅 안잡히도록 gitignore 등록하고 개발 시작

#### ✅ 프로그램 종료 시 process.exit()를 호출 금지

#### ✅ 파일, 패키지 등의 이름을 바꾸거나 이동 금지

#### ✅ 자바스크립트 코드 컨벤션 Airbnb 스타일 가이드 준수

#### 들여쓰기

- 최대 depth는 2까지만 허용. (e.g., while문 안에 if문 포함)

#### ✅ 삼항 연산자 사용 금지

#### 함수 길이 10줄 이내

- 함수(또는 메서드) 길이는 최대 10줄을 넘지 않아야 함.

#### else 사용을 지양하고, if 조건절에서 바로 return하는 방식으로 작성

#### 함수는 한 가지 역할만 수행

- 함수는 단일 책임 원칙에 따라 한 가지 역할만 수행해야 함.

#### ✅ UI 관련 로직을 제외한 모든 기능에 대해 단위 테스트 작성

- Jest로 모든 기능의 테스트를 작성하고, 테스트가 통과되는지 확인.

#### ✅ @woowacourse/mission-utils 라이브러리 사용

- Console 및 DateTimes API 활용:
  \
  Console.readLineAsync(): 사용자 입력을 비동기로 받을 때 사용.
  \
  Console.print(): 출력을 담당.
  \
  DateTimes.now(): 현재 날짜와 시간을 가져오는 데 사용.

#### ✅ 입출력을 담당하는 클래스를 별도로 작성 (InputView, OutputView).

#### 하드코딩 사용 지양

- 문자열 같은 데이터를 하드코딩하지 말고 상수로 모아서 관리하기

# 5. 예외사항

## 🛠️ [ERROR] 를 반환해야 하는 경우

### 공통

📍 ✅ 입력값이 비었을 경우 (trim() 적용 후)<br>
📍 ✅ 형식이 잘못된 경우 (예: [사이다-3] 대신 [사이다3] 입력)<br>
📍 ✅ Y/N Input은 Y, N 외의 다른 값을 입력했을 경우<br>
📍 ✅ 숫자가 아닌 값을 입력했을 경우<br>
📍 음수나 0과 같은 자연수(양의 정수)가 아닌 수를 입력했을 경우<br>


### 상품명과 수량 입력

📍 상품명과 수량 형식이 올바르지 않을 경우 (예: [사이다-3] 형식을 사용하지 않았을 때)<br>
📍 상품명이 존재하지 않는 경우 (재고에 없는 상품 입력)<br>
📍 재고보다 많은 수량을 입력했을 경우<br>
📍 수량에 숫자가 아닌 값을 입력했을 경우<br>
📍 수량이 음수이거나 0일 경우<br>

### 프로모션 적용 기간 확인

📍 유효하지 않은 프로모션 상품을 입력했을 경우 (예: 프로모션 기간이 지난 상품)<br>

## 유효한 입력

### 공통

📍 Y/N 입력에서 y/n 소문자로 입력했을 경우<br>

### 상품명과 수량 입력

#### N+1행사 제품의 경우


# 6. 프로모션 N+1 로직 정리

## 1. 프로모션 기간 및 재고 확인

- 프로모션 정보가 존재하고 프로모션 기간 내일 때 프로모션 조건을 적용
- 상품의 프로모션 재고가 존재하는지 확인

## 2. 1+1 프로모션 처리

buy와 get이 각각 1인 경우

### 최대 증정 가능한 수량(maxBonusQuantity)과 실제 가능한 증정 수량(actualBonusQuantity)으로 충분한 프로모션 재고 여부 처리:

- #### 프로모션 재고가 부족한 경우 (actualBonusQuantity < maxBonusQuantity)

  추가 구매 수량을 정가로 결제할지 사용자에게 확인
  정가 결제를 원하지 않으면 추가 구매 수량을 제거
  증정 가능한 수량과 할인 금액을 계산하여 최종 결제 처리

- #### 프로모션 재고가 충분한 경우 (actualBonusQuantity === maxBonusQuantity)

  구매 수량이 짝수일 경우:
  증정 수량을 구매 수량의 절반으로 설정하고, 할인 금액을 계산
  구매 수량이 홀수일 경우:
  추가 증정 여부를 사용자에게 묻기
  추가 증정에 동의한 경우 구매 수량을 1 증가시키고 증정 수량을 전체 가능 수량으로 설정
  추가 증정에 동의하지 않으면 1개의 상품만 구매 처리되며 할인 금액을 계산

## 3. N+1 프로모션 처리

buy와 get이 다른 값인 경우

### 최대 증정 가능한 수량(maxBonusQuantity)과 실제 가능한 증정 수량(actualBonusQuantity)으로 충분한 프로모션 재고 여부 처리:

- #### 프로모션 재고가 부족한 경우 (actualBonusQuantity < maxBonusQuantity)
  정가 결제를 할지 사용자에게 확인하고, 정가 결제를 원하지 않으면 추가 구매 수량을 제외
  정가 결제 시, 추가 구매 수량을 포함하여 결제를 진행
  증정 가능한 수량과 할인 금액을 최종 결제 금액에 반영
- #### 프로모션 재고가 충분한 경우 (actualBonusQuantity >= maxBonusQuantity)
  구매 수량이 프로모션 조건(buy)을 정확히 맞추지 않을 때는 프로모션 증정 여부를 사용자에게 확인
  추가 증정 여부에 따라 구매 수량을 증가시키거나 증정 수량과 할인 금액을 최종 결제에 반영

## 4. 결제 처리

총 구매 수량과 증정 수량을 합산하여 결제에 반영
할인 금액을 적용하고, 최종 결제 금액을 계산하여 장바구니에 추가
